<script src="assets/js/jquery.min.js"></script>

<header>
    <div class="container p-1">
        <nav class="nav navbar navbar-expand-xl navbar-light p-0 ">
            <div class="d-flex justify-content-start align-items-center px-2">

                <a href="" class="navbar-brand  logo" id="logo">

                </a>
                <a href="" class="navbar-brand  logo" id="eoc-logo" target="_blank">

                </a>

            </div>
            <span class="d-flex justify-content-end">
                <button id="mbtn-tc" class="btn btn-sm mbtn-lang" onclick="selectLang()">
                    繁
                </button>
                <button id="mbtn-en" class="btn  btn-sm mbtn-lang" onclick="selectLang()">
                    EN
                </button>
                <button type="button" class="btn navbar-toggler" data-toggle="collapse" data-target="#navbarResponsive">
                    <span class="navbar-toggler-icon"> </span>
                </button>
            </span>



            <div class="collapse bg-white nav-menu navbar-collapse pb-4" id="navbarResponsive">


                <div class="my-3 mx-2 heading-btn">
                    <a href="" role="button" class="btn btn-outline-secondary btn-sm" id="btn-eoc" target="_blank"></a>
                    <button id="btn-tc" class="btn btn-secondary btn-sm btn-lang" onclick="selectLang()">
                        繁
                    </button>
                    <button id="btn-en" class="btn btn-secondary btn-sm btn-lang" onclick="selectLang()">
                        EN
                    </button>



                </div>

                <ul class="navbar-nav main-menu my-3">
                    <li class="nav-item">
                        <a href="" id="m1" class=" nav-link active"></a>
                    </li>
                    <li class="nav-item">
                        <a href="" id="m2-1" class=" nav-link"></a>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="" id="m3" class=" nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false"></a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" id="m3-1"></a>
                            <a class="dropdown-item" href="#" id="m3-2"></a>
                            <a class="dropdown-item" href="#" id="m3-3"></a>
                            <a class="dropdown-item" href="#" id="m3-4"></a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="" id="m4" class=" nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false"></a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" id="m4-1" target="_blank"></a>
                            <a class="dropdown-item" href="#" id="m4-2" target="_blank"></a>
                            <a class="dropdown-item" href="#" id="m4-3" target="_blank"></a>
                            <a class="dropdown-item" href="#" id="m4-4"></a>
                            <a class="dropdown-item" href="#" id="m4-5"></a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="" id="m5-1" class=" nav-link"></a>
                    </li>
                </ul>

            </div>
        </nav>
    </div>


</header>

<script>



    //insert Element's ID
    var menuId = ["btn-eoc", "logo", "eoc-logo", "m1", "m2-1", "m3", "m3-1", "m3-2", "m3-3", "m3-4", "m4", "m4-1", "m4-2", "m4-3", "m4-4", "m4-5", "m5-1"];


    $.getJSON('data.json', function (data) {

        var menu = data[0].menu;

        for (var j = 0; j < menuId.length; j++) {

            if (lang != "tc") {
                langSwitch(x) // Call listener function at run time
                x.addListener(langSwitch) // Attach listener function on state changes
                document.getElementById("btn-tc").style.display = "inline";
                document.getElementById("btn-en").style.display = "none";
                document.getElementById(menuId[j]).innerHTML = menu[menuId[j]].en;
                document.getElementById(menuId[j]).setAttribute("href", menu[menuId[j]].linken);



            } else {
                langSwitch(x) // Call listener function at run time
                x.addListener(langSwitch) // Attach listener function on state changes
                document.getElementById("btn-tc").style.display = "none";
                document.getElementById("btn-en").style.display = "inline";
                document.getElementById(menuId[j]).innerHTML = menu[menuId[j]].tc;
                document.getElementById(menuId[j]).setAttribute("href", menu[menuId[j]].linktc);



            }

            // document.getElementById(menuId[j]).setAttribute("href", menu[menuId[j]].link + "?lang=" + lang);
        }




    });
    //change active menu item border color
    $(document).ready(function () {

        var location = window.location.href;

        function searchString(string) {
            if (location.indexOf(string) > -1) {
                return true;
            };
        }

        function menuBorderColor(page) {
            document.getElementById(page).style.borderColor = "#0F93AB";
        }


        if (searchString("index")) {

            menuBorderColor("m1");

        } else if (searchString("message")) {
            menuBorderColor("m2-1");

        } else if (searchString("gallery")) {
            menuBorderColor("m5-1");
        }

        else if (searchString("chairpersons") || searchString("members") || searchString("projects") || searchString("stories")) {
            menuBorderColor("m3");
        } else {
            menuBorderColor("m4");
        }

    });

    //end

    //mobile language switch

    function langSwitch(x) {
        if (x.matches) { // If media query matches (mobile version)
            if (lang != "tc") {

                document.getElementById("mbtn-tc").style.display = "inline";
                document.getElementById("mbtn-en").style.display = "none";

            } else {

                document.getElementById("mbtn-tc").style.display = "none";
                document.getElementById("mbtn-en").style.display = "inline";

            }


        } else {
            document.getElementById("mbtn-en").style.display = "none";
            document.getElementById("mbtn-tc").style.display = "none";


        }
    }


    var x = window.matchMedia("(max-width: 1200px)")
//end of mobile language switch

</script>